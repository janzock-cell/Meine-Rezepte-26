<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gourmet AI | Professional Chef</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Inter:wght@300;400;500;600;700;800;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" />
    <link rel="stylesheet" href="index.css">
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@0.14.1",
    "cropperjs": "https://esm.sh/cropperjs@1.6.1",
    "canvas-confetti": "https://esm.sh/canvas-confetti@1.9.2",
    "@netlify/functions": "https://esm.sh/@netlify/functions@^5.1.2",
    "@jest/globals": "https://esm.sh/@jest/globals@^30.2.0",
    "firebase/": "https://esm.sh/firebase@^12.7.0/"
  }
}
</script>
</head>
<body class="dark-mode">
    <div id="toast-container"></div>

    <div id="app-viewport">
        <main id="tab-container">
            <!-- DISCOVER -->
            <section id="tab-discover" class="tab-pane active">
                <header class="view-header">
                    <h1 class="brand" id="brand-logo">Gourmet<span>AI</span></h1>
                    <div class="header-actions">
                        <span id="api-status-dot" class="status-dot green"></span>
                    </div>
                </header>
                
                <div class="scroll-area">
                    <div id="draft-notification" class="glass-card draft-banner hidden">
                        <p>Entwurf fortsetzen?</p>
                        <div class="banner-btns">
                            <button id="restore-draft-btn">Wiederherstellen</button>
                            <button id="dismiss-draft-btn">Verwerfen</button>
                        </div>
                    </div>

                    <div class="glass-card main-form">
                        <div class="input-field">
                            <label>Was m√∂chtest du kochen?</label>
                            <input type="text" id="prompt-input" placeholder="Zutaten oder Gericht...">
                        </div>
                        
                        <div class="settings-grid">
                            <div class="input-field">
                                <label>Niveau</label>
                                <select id="difficulty-select">
                                    <option value="leicht">Leicht & Schnell</option>
                                    <option value="gourmet">Gourmet (High End)</option>
                                    <option value="profi">Profi (Master Chef)</option>
                                    <option value="airfryer">Airfryer Edition</option>
                                </select>
                            </div>
                            <div class="input-field">
                                <label>Personen</label>
                                <input type="number" id="servings-input" value="2" min="1" max="10">
                            </div>
                        </div>

                        <div class="input-field">
                            <label>Besonderheiten</label>
                            <input type="text" id="wishes-input" placeholder="z.B. Vegan, Low Carb...">
                        </div>

                        <button id="btn-generate" class="primary-btn">‚ú® Rezept kreieren</button>
                    </div>

                    <div id="recipe-output"></div>
                </div>
            </section>

            <!-- BOOK -->
            <section id="tab-book" class="tab-pane">
                <header class="view-header">
                    <h1 class="brand">Meine<span>Rezepte</span></h1>
                </header>
                <div class="scroll-area">
                    <div id="saved-recipes-list" class="recipe-grid"></div>
                </div>
            </section>

            <!-- LIST -->
            <section id="tab-shopping" class="tab-pane">
                <header class="view-header">
                    <h1 class="brand">Einkaufs<span>liste</span></h1>
                    <button id="btn-clear-list" class="flat-btn" style="padding: 8px 12px; font-size: 0.7rem;">üóëÔ∏è Leeren</button>
                </header>
                <div class="scroll-area">
                    <div id="shopping-list-content"></div>
                </div>
            </section>
        </main>

        <nav class="bottom-nav">
            <button class="nav-btn active" data-tab="tab-discover">
                <span>üçΩÔ∏è</span>
                <label>Mixen</label>
            </button>
            <div class="fab-wrap">
                <button id="fab-scan" class="fab-btn">üì∏</button>
            </div>
            <button class="nav-btn" data-tab="tab-book">
                <span>üìñ</span>
                <label>Buch</label>
                <div id="saved-count-badge" class="badge hidden">0</div>
            </button>
            <button class="nav-btn" data-tab="tab-shopping">
                <span>üõí</span>
                <label>Liste</label>
            </button>
        </nav>
    </div>

    <!-- Modals -->
    <div id="loading-overlay" class="hidden">
        <div class="loader-box">
            <div class="pan-loader"></div>
            <p id="loader-msg">Der Chef bereitet vor...</p>
        </div>
    </div>

    <div id="modal-scanner" class="layer hidden">
        <div class="layer-overlay close-layer"></div>
        <div class="layer-content">
            <div class="layer-header">
                <h3>Quelle w√§hlen</h3>
                <button class="close-layer">‚úï</button>
            </div>
            <div class="layer-body source-grid">
                <label class="source-card">
                    <input type="file" id="input-camera" accept="image/*" capture="environment" class="hidden">
                    <span class="icon">üì∑</span><span class="label">Kamera</span>
                </label>
                <label class="source-card">
                    <input type="file" id="input-gallery" accept="image/*" class="hidden">
                    <span class="icon">üñºÔ∏è</span><span class="label">Galerie</span>
                </label>
            </div>
        </div>
    </div>

    <div id="modal-cropper" class="layer hidden dark-bg">
        <div class="cropper-frame">
            <div id="cropper-wrapper">
                <img id="cropper-img" src="">
            </div>
            <div class="layer-footer">
                <button id="btn-crop-cancel" class="flat-btn close-layer">Abbruch</button>
                <button id="btn-crop-confirm" class="gold-btn">Bildausschnitt w√§hlen</button>
            </div>
        </div>
    </div>

    <script type="module" src="index.js"></script>
</body>
</html>